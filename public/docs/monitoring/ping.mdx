
---
title: ping()
description: Verifica conectividade e latÃªncia do banco
---

# ping()

Verifica a conectividade com o banco de dados e mede a latÃªncia da conexÃ£o, Ãºtil para monitoramento de saÃºde do sistema.

## Sintaxe

```typescript
await db.ping(): Promise<PingResult>
```

## Retorno

```typescript
{
  success: boolean,
  latency: number, // em milissegundos
  timestamp: Date,
  driver: string,
  status: 'healthy' | 'degraded' | 'error'
}
```

## Exemplos

### VerificaÃ§Ã£o Simples
```javascript
const result = await db.ping();

if (result.success) {
  console.log(`Banco conectado - LatÃªncia: ${result.latency}ms`);
} else {
  console.error('Banco nÃ£o estÃ¡ respondendo');
}
```

### Monitoramento ContÃ­nuo
```javascript
async function monitorDatabase() {
  const result = await db.ping();
  
  console.log(`Status: ${result.status}`);
  console.log(`LatÃªncia: ${result.latency}ms`);
  console.log(`Driver: ${result.driver}`);
  
  if (result.latency > 1000) {
    console.warn('Alta latÃªncia detectada!');
  }
  
  if (!result.success) {
    console.error('Falha na conexÃ£o com o banco!');
    // Implementar lÃ³gica de reconexÃ£o
  }
}

// Monitorar a cada 30 segundos
setInterval(monitorDatabase, 30000);
```

### Health Check para API
```javascript
app.get('/health', async (req, res) => {
  try {
    const dbPing = await db.ping();
    
    res.json({
      status: dbPing.success ? 'healthy' : 'unhealthy',
      database: {
        connected: dbPing.success,
        latency: dbPing.latency,
        driver: dbPing.driver,
        timestamp: dbPing.timestamp
      },
      uptime: process.uptime()
    });
  } catch (error) {
    res.status(500).json({
      status: 'error',
      error: error.message
    });
  }
});
```

### Alertas por LatÃªncia
```javascript
async function checkLatency() {
  const result = await db.ping();
  
  if (result.latency > 500) {
    console.warn(`âš ï¸  Alta latÃªncia: ${result.latency}ms`);
  } else if (result.latency > 100) {
    console.info(`ğŸ“Š LatÃªncia moderada: ${result.latency}ms`);
  } else {
    console.log(`âœ… LatÃªncia boa: ${result.latency}ms`);
  }
  
  return result;
}
```

## Status de SaÃºde

- `healthy`: LatÃªncia < 100ms, sem erros
- `degraded`: LatÃªncia 100-1000ms, funcionando com lentidÃ£o
- `error`: Falha na conexÃ£o ou latÃªncia > 1000ms

## Casos de Uso

- Health checks em APIs
- Monitoramento de infraestrutura
- Alertas de performance
- Dashboards de status
- DiagnÃ³stico de problemas de conectividade
